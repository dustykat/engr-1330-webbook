<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../../img/favicon.ico">
        <title>Lab18 - ENGR 1330</title>
        <link href="../../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../../css/font-awesome.min.css" rel="stylesheet">
        <link href="../../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

        <script src="../../../js/jquery-1.10.2.min.js" defer></script>
        <script src="../../../js/bootstrap-3.0.3.min.js" defer></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/python.min.js"></script>
        <script>hljs.initHighlightingOnLoad();</script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
            <div class="container">

                <!-- Collapsed navigation -->
                <div class="navbar-header">
                    <!-- Expander button -->
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    <a class="navbar-brand" href="../../..">ENGR 1330</a>
                </div>

                <!-- Expanded navigation -->
                <div class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li >
                                <a href="../../..">Home</a>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Intro <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../1-Lessons/Lesson00/lesson0/">Computational Thinking and Data Science</a>
</li>
                                    
<li >
    <a href="../../../1-Lessons/Lesson01/lesson1/">Problem Solving with Computational Thinking</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Python Scripting <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../1-Lessons/Lesson02/lesson2/">Simple Computation</a>
</li>
                                    
<li >
    <a href="../../../1-Lessons/Lesson03/lesson3/">Data Structures and the MATH package</a>
</li>
                                    
<li >
    <a href="../../../1-Lessons/Lesson04/lesson4/">Program Control Structures</a>
</li>
                                    
<li >
    <a href="../../../lesson0/lesson0/">External Functions and Modules</a>
</li>
                                    
<li >
    <a href="../../../lesson0/lesson0/">Engineering and Scientific Data Files</a>
</li>
                                    
<li >
    <a href="../../../1-Lessons/Lesson07/lesson6/">Computational Linear Algebra using NUMPY</a>
</li>
                                    
<li >
    <a href="../../../1-Lessons/Lesson08/lesson7/">Database Query and Manipulation using PANDAS</a>
</li>
                                    
<li >
    <a href="../../../1-Lessons/Lesson09/lesson8/">Visual Display of Data using MATPLOTLIB</a>
</li>
                                    
<li >
    <a href="../../../1-Lessons/Lesson10/lesson10/">Implicit Equations</a>
</li>
                                    
<li >
    <a href="../../../1-Lessons/Lesson11/lesson11/">Interpolation and Integration</a>
</li>
                                    
<li >
    <a href="../../../1-Lessons/Lesson12/lesson12/">Linear Equation Systems</a>
</li>
                                    
<li >
    <a href="../../../1-Lessons/Lesson13/lesson13/">Non-Linear Equation Systems</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Models & Decisions <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../lesson0/lesson0/">Statistical Data Modeling</a>
</li>
                                    
<li >
    <a href="../../../lesson0/lesson0/">Randomness and Probability</a>
</li>
                                    
<li >
    <a href="../../../1-Lessons/Lesson15/lesson15/">Descriptive Statistics</a>
</li>
                                    
<li >
    <a href="../../../lesson0/lesson0/">Distribution Models</a>
</li>
                                    
<li >
    <a href="../../../1-Lessons/Lesson17/lesson17/">Probability Estimation Modeling</a>
</li>
                                    
<li >
    <a href="../../../lesson0/lesson0/">Hypothesis Testing</a>
</li>
                                    
<li >
    <a href="../../../lesson0/lesson0/">Experimental Design (A/B Testing)</a>
</li>
                                    
<li >
    <a href="../../../lesson0/lesson0/">Interval Estimates</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Prediction <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../lesson0/lesson0/">Fitting Models to Observations</a>
</li>
                                    
<li >
    <a href="../../../lesson0/lesson0/">Least Squares (Regression) Model Fitting</a>
</li>
                                    
<li >
    <a href="../../../lesson0/lesson0/">Model Quality</a>
</li>
                                    
<li >
    <a href="../../../lesson0/lesson0/">Estimating Probability/Quantile Regression</a>
</li>
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">Classification <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    
<li >
    <a href="../../../lesson0/lesson0/">Introduction</a>
</li>
                                    
<li >
    <a href="../../../lesson0/lesson0/">Types</a>
</li>
                                    
<li >
    <a href="../../../lesson0/lesson0/">K Nearest Neighbor</a>
</li>
                                    
<li >
    <a href="../../../lesson0/lesson0/">Engine Update</a>
</li>
                                </ul>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav navbar-right">
                        <li>
                            <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#laboratory-18-reject-it-or-fail-or-a-lab-on-hypothesis-testing">Laboratory 18: "Reject it or Fail!" or a Lab on "Hypothesis Testing" </a></li>
            <li><a href="#full-name">Full name:</a></li>
            <li><a href="#r">R#:</a></li>
            <li><a href="#hex">HEX:</a></li>
            <li><a href="#title-of-the-notebook">Title of the notebook</a></li>
            <li><a href="#date">Date:</a></li>
            <li><a href="#exercise-wait-a-minute-isnt-the-kruskal-wallis-test-missing-something">Exercise: Wait a minute ... Isn't The Kruskal-Wallis test missing something?  </a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<p><strong>Download</strong> (right-click, save target as ...) this page as a jupyterlab notebook from: (LINK NEEDS FIXING!)</p>
<p><a href="https://atomickitty.ddns.net:8000/user/sensei/files/engr-1330-webroot/engr-1330-webbook/ctds-psuedocourse/docs/8-Labs/Lab8/Lab9_Dev.ipynb?_xsrf=2%7C1b4d47c3%7C0c3aca0c53606a3f4b71c448b09296ae%7C1623531240">Lab18</a></p>
<hr />
<h1 id="laboratory-18-reject-it-or-fail-or-a-lab-on-hypothesis-testing"><font color=darkred>Laboratory 18: "Reject it or Fail!" or a Lab on "Hypothesis Testing" </font></h1>
<pre><code class="python"># Preamble script block to identify host, user, and kernel
import sys
! hostname
! whoami
print(sys.executable)
print(sys.version)
print(sys.version_info)
</code></pre>

<pre><code>DESKTOP-EH6HD63
desktop-eh6hd63\farha
C:\Users\Farha\Anaconda3\python.exe
3.7.4 (default, Aug  9 2019, 18:34:13) [MSC v.1915 64 bit (AMD64)]
sys.version_info(major=3, minor=7, micro=4, releaselevel='final', serial=0)
</code></pre>
<pre><code class="python">A = 123456789 #lET'S SAY THAT THIS IS MY R NUMBER
print(hex(A))
#print(bin(A))
</code></pre>

<pre><code>0x75bcd15
</code></pre>
<h2 id="full-name">Full name:</h2>
<h2 id="r">R#:</h2>
<h2 id="hex">HEX:</h2>
<h2 id="title-of-the-notebook">Title of the notebook</h2>
<h2 id="date">Date:</h2>
<h4 id="remember-where-we-left-our-last-laboratory-session">Remember where we left our last laboratory session?</h4>
<p><img alt="" src="https://media.tumblr.com/tumblr_mbui1kpPoU1rxdw8g.gif" /></p>
<h4 id="accept-my-gratitude-if-you-do-but-in-case-you-saw-agent-k-and-agent-j-sometime-after-thursday-or-for-any-other-reason-do-not-recall-it-here-is-where-were-we-left-things">Accept my gratitude if you do! But in case you saw Agent K and Agent J sometime after Thursday or for any other reason, do not recall it, here is where were we left things:</h4>
<h4 id="we-had-a-dataset-with-two-sets-of-numbers-set-1-and-set2-we-did-a-bunch-of-stuff-and-decided-that-the-normal-distribution-data-model-provides-a-good-fit-for-both-of-sample-sets-we-then-used-the-right-parameters-for-normal-data-model-mean-and-standard-deviation-to-generate-one-new-sample-set-based-on-each-set-we-then-looked-at-the-four-sets-next-to-each-other-and-asked-a-rather-simple-question-are-these-sets-different-or-similar">We had a dataset with two sets of numbers (Set 1 and Set2). We did a bunch of stuff and decided that the Normal Distribution Data Model provides a good fit for both of sample sets. We, then used the right parameters for Normal Data Model (mean and standard deviation) to generate one new sample set based on each set. We then looked at the four sets next to each other and asked a rather simple question: Are these sets different or similar?</h4>
<h4 id="while-we-reached-some-assertions-based-on-visual-assessment-we-did-not-manage-to-solidify-our-assertation-in-any-numerical-way-well-now-is-the-time">While we reached some assertions based on visual assessment, we did not manage to solidify our assertation in any numerical way. Well, now is the time!</h4>
<pre><code class="python">#Load the necessary packages
import numpy as np
import pandas as pd
import matplotlib.pyplot as plt
</code></pre>

<pre><code class="python">#Previously ...
data = pd.read_csv(&quot;lab13_data.csv&quot;) 
set1 = np.array(data['Set1'])
set2 = np.array(data['Set2'])
mu1 = set1.mean()
sd1 = set1.std()
mu2 = set2.mean()
sd2 = set2.std()
set1_s = np.random.normal(mu1, sd1, 100)
set2_s = np.random.normal(mu2, sd2, 100)
data2 = pd.DataFrame({'Set1s':set1_s,'Set2s':set2_s})

</code></pre>

<pre><code class="python">#Previously ...
fig, ax = plt.subplots()
data2.plot.hist(density=False, ax=ax, title='Histogram: Set1 and Set1 samples vs. Set2 and Set2 samples', bins=40)
data.plot.hist(density=False, ax=ax, bins=40)

ax.set_ylabel('Count')
ax.grid(axis='y')
</code></pre>

<p><img alt="png" src="output_9_0.png" /></p>
<pre><code class="python">#Previously ...
fig = plt.figure(figsize =(10, 7)) 
plt.boxplot ([set1, set1_s, set2, set2_s],1, '')
plt.show()
</code></pre>

<p><img alt="png" src="output_10_0.png" /></p>
<p><strong>We can use statistical hypothesis tests to confirm that our sets are from Normal Distribution Data Models. We can use the Shapiro-Wilk Normality Test:</strong></p>
<pre><code class="python"># the Shapiro-Wilk Normality Test for set1
from scipy.stats import shapiro

stat, p = shapiro(data['Set1'])
print('stat=%.3f, p=%.3f' % (stat, p))
if p &gt; 0.05:
    print('Probably Gaussian')
else:
    print('Probably not Gaussian')
</code></pre>

<pre><code>stat=0.992, p=0.793
Probably Gaussian
</code></pre>
<pre><code class="python"># the Shapiro-Wilk Normality Test for set2
from scipy.stats import shapiro

stat, p = shapiro(data['Set2'])
print('stat=%.3f, p=%.3f' % (stat, p))
if p &gt; 0.05:
    print('Probably Gaussian')
else:
    print('Probably not Gaussian')
</code></pre>

<pre><code>stat=0.981, p=0.151
Probably Gaussian
</code></pre>
<p><strong>Now let's confirm that set1 and set1_s are from the same distribution. We can use the Mann-Whitney U Test for this:</strong></p>
<pre><code class="python">from scipy.stats import mannwhitneyu # import a useful non-parametric test
stat, p = mannwhitneyu(data['Set1'],data2['Set1s'])
print('statistic=%.3f, p-value at rejection =%.3f' % (stat, p))
if p &gt; 0.05:
    print('Probably the same distribution')
else:
    print('Probably different distributions')
</code></pre>

<pre><code>statistic=4902.000, p-value at rejection =0.406
Probably the same distribution
</code></pre>
<p><strong>Let's also confirm that set2 and set2_s are from the same distribution:</strong></p>
<pre><code class="python">from scipy.stats import mannwhitneyu # import a useful non-parametric test
stat, p = mannwhitneyu(data['Set2'],data2['Set2s'])
print('statistic=%.3f, p-value at rejection =%.3f' % (stat, p))
if p &gt; 0.05:
    print('Probably the same distribution')
else:
    print('Probably different distributions')
</code></pre>

<pre><code>statistic=4811.000, p-value at rejection =0.323
Probably the same distribution
</code></pre>
<p><strong>Based on the results we can say set1 and set1_s probably belong to the same distrubtion. The same can be stated about set2 and set2_s. Now let's check and see if set1 and set2 are SIGNIFICANTLY different or not?</strong></p>
<pre><code class="python">from scipy.stats import mannwhitneyu # import a useful non-parametric test
stat, p = mannwhitneyu(data['Set1'],data['Set2'])
print('statistic=%.3f, p-value at rejection =%.3f' % (stat, p))
if p &gt; 0.05:
    print('Probably the same distribution')
else:
    print('Probably different distributions')
</code></pre>

<pre><code>statistic=0.000, p-value at rejection =0.000
Probably different distributions
</code></pre>
<p><strong>The test's result indicate that the set1 and set2 belong to distirbutions with different measures of central tendency (means). We can check the same for set1_s and set2_s as well:</strong></p>
<pre><code class="python">from scipy.stats import mannwhitneyu # import a useful non-parametric test
stat, p = mannwhitneyu(data2['Set1s'],data2['Set2s'])
print('statistic=%.3f, p-value at rejection =%.3f' % (stat, p))
if p &gt; 0.05:
    print('Probably the same distribution')
else:
    print('Probably different distributions')
</code></pre>

<pre><code>statistic=0.000, p-value at rejection =0.000
Probably different distributions
</code></pre>
<p><strong>Now we can state at a 95% confidence level that set1 and set2 are different. The same for set1s and set2s.</strong></p>
<hr />
<h3 id="example-a-dataset-containing-marks-obtained-by-students-on-basic-skills-like-basic-math-and-language-skills-reading-and-writing-is-collected-from-an-educational-institution-and-we-have-been-tasked-to-give-them-some-important-inferences">Example: A dataset containing marks obtained by students on basic skills like basic math and language skills (reading and writing) is collected from an educational institution and we have been tasked to give them some important inferences.</h3>
<blockquote>
<p>Hypothesis: There is no difference in means of student performance in any of basic literacy skills i.e. reading, writing, math.</p>
</blockquote>
<hr />
<p><em>This is based on an example by Joju John Varghese on "Hypothesis Testing for Inference using a Dataset" available @ https://medium.com/swlh/hypothesis-testing-for-inference-using-a-data-set-aaa799e94cdf. The dataset is available @ https://www.kaggle.com/spscientist/students-performance-in-exams.</em></p>
<pre><code class="python">df = pd.read_csv(&quot;StudentsPerformance.csv&quot;) 
df.head()
</code></pre>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>gender</th>
      <th>race/ethnicity</th>
      <th>parental level of education</th>
      <th>lunch</th>
      <th>test preparation course</th>
      <th>math score</th>
      <th>reading score</th>
      <th>writing score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>0</td>
      <td>female</td>
      <td>group B</td>
      <td>bachelor's degree</td>
      <td>standard</td>
      <td>none</td>
      <td>72</td>
      <td>72</td>
      <td>74</td>
    </tr>
    <tr>
      <td>1</td>
      <td>female</td>
      <td>group C</td>
      <td>some college</td>
      <td>standard</td>
      <td>completed</td>
      <td>69</td>
      <td>90</td>
      <td>88</td>
    </tr>
    <tr>
      <td>2</td>
      <td>female</td>
      <td>group B</td>
      <td>master's degree</td>
      <td>standard</td>
      <td>none</td>
      <td>90</td>
      <td>95</td>
      <td>93</td>
    </tr>
    <tr>
      <td>3</td>
      <td>male</td>
      <td>group A</td>
      <td>associate's degree</td>
      <td>free/reduced</td>
      <td>none</td>
      <td>47</td>
      <td>57</td>
      <td>44</td>
    </tr>
    <tr>
      <td>4</td>
      <td>male</td>
      <td>group C</td>
      <td>some college</td>
      <td>standard</td>
      <td>none</td>
      <td>76</td>
      <td>78</td>
      <td>75</td>
    </tr>
  </tbody>
</table>
</div>

<pre><code class="python">df.describe()
</code></pre>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>math score</th>
      <th>reading score</th>
      <th>writing score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>count</td>
      <td>1000.00000</td>
      <td>1000.000000</td>
      <td>1000.000000</td>
    </tr>
    <tr>
      <td>mean</td>
      <td>66.08900</td>
      <td>69.169000</td>
      <td>68.054000</td>
    </tr>
    <tr>
      <td>std</td>
      <td>15.16308</td>
      <td>14.600192</td>
      <td>15.195657</td>
    </tr>
    <tr>
      <td>min</td>
      <td>0.00000</td>
      <td>17.000000</td>
      <td>10.000000</td>
    </tr>
    <tr>
      <td>25%</td>
      <td>57.00000</td>
      <td>59.000000</td>
      <td>57.750000</td>
    </tr>
    <tr>
      <td>50%</td>
      <td>66.00000</td>
      <td>70.000000</td>
      <td>69.000000</td>
    </tr>
    <tr>
      <td>75%</td>
      <td>77.00000</td>
      <td>79.000000</td>
      <td>79.000000</td>
    </tr>
    <tr>
      <td>max</td>
      <td>100.00000</td>
      <td>100.000000</td>
      <td>100.000000</td>
    </tr>
  </tbody>
</table>
</div>

<pre><code class="python">set1 = df['math score']
set2 = df['reading score']
set3 = df['writing score']
</code></pre>

<pre><code class="python">import seaborn as sns
sns.distplot(set1,color='navy', rug=True)
sns.distplot(set2,color='darkorange', rug=True)
sns.distplot(set3,color='green', rug=True)
plt.xlim(0,100)
plt.xlabel('Test Results')

</code></pre>

<pre><code>Text(0.5, 0, 'Test Results')
</code></pre>
<p><img alt="png" src="output_27_1.png" /></p>
<h4 id="it-seems-that-all-three-samples-have-the-same-population-means-and-it-seems-there-is-no-significant-difference-between-them-at-all-lets-set-the-null-and-alternative-hypothesis">It seems that all three samples have the same population means and it seems there is no significant difference between them at all. Let's set the null and alternative hypothesis:</h4>
<blockquote>
<p>Ho: There is no difference in performance of students between math, reading and writing skills. <br>
Ha: There is a difference in performance of students between math, reading and writing skills. <br></p>
</blockquote>
<pre><code class="python">from scipy.stats import mannwhitneyu # import a useful non-parametric test
stat, p = mannwhitneyu(set1,set2)
print('statistic=%.3f, p-value at rejection =%.3f' % (stat, p))
if p &gt; 0.05:
    print('Probably the same distribution')
else:
    print('Probably different distributions')
</code></pre>

<pre><code>statistic=441452.500, p-value at rejection =0.000
Probably different distributions
</code></pre>
<pre><code class="python">from scipy.stats import mannwhitneyu # import a useful non-parametric test
stat, p = mannwhitneyu(set1,set3)
print('statistic=%.3f, p-value at rejection =%.3f' % (stat, p))
if p &gt; 0.05:
    print('Probably the same distribution')
else:
    print('Probably different distributions')
</code></pre>

<pre><code>statistic=461212.500, p-value at rejection =0.001
Probably different distributions
</code></pre>
<pre><code class="python">from scipy.stats import mannwhitneyu # import a useful non-parametric test
stat, p = mannwhitneyu(set2,set3)
print('statistic=%.3f, p-value at rejection =%.3f' % (stat, p))
if p &gt; 0.05:
    print('Probably the same distribution')
else:
    print('Probably different distributions')
</code></pre>

<pre><code>statistic=480672.000, p-value at rejection =0.067
Probably the same distribution
</code></pre>
<pre><code class="python">from scipy.stats import kruskal
stat, p = kruskal(set1, set2, set3)
print('Statistics=%.3f, p=%.3f' % (stat, p))
# interpret
alpha = 0.05
if p &gt; 0.05:
    print('Probably the same distribution')
else:
    print('Probably different distributions')
</code></pre>

<pre><code>Statistics=21.225, p=0.000
Probably different distributions
</code></pre>
<hr />
<h3 id="example-website-design-a-practical-example-of-ab-testing">Example: Website Design: A practical example of A/B Testing</h3>
<p><em>inspired by an example in <strong>"A/B Test Significance in Python"</strong> by <strong>Samuel Hinton</strong> available at</em> https://cosmiccoding.com.au/tutorials/ab_tests <br>
<img alt="" src="https://www.invespcro.com/blog/images/blog-images/ab-test-1-1.jpg" /> <br></p>
<h4 id="imagine-youre-in-charge-of-a-website-eg-an-online-videogame-shop-you-have-the-current-version-of-the-website-aka-a-but-arent-happy-with-it-for-instance-you-are-not-selling-as-much-as-you-like-you-want-to-change-the-design-of-the-add-to-cart-button-aka-b-and-maybe-that-will-increase-your-sells">Imagine you’re in charge of a website (e.g., an online videogame shop). You have the current version of the website (aka. "A"), but aren’t happy with it. For instance, you are not selling as much as you like. You want to change the design of the "Add to Cart" button (aka. "B") and maybe that will increase your sells. <br></h4>
<p><img alt="" src="https://www.volusion.com/blog/content/images/wp/buttonaandbuttonn.jpg" /> <br></p>
<h4 id="you-set-up-your-website-so-that-half-the-people-are-directed-to-the-old-website-and-half-to-one-where-youve-made-your-change-you-have-data-from-both-and-want-to-know-with-confidence-does-the-change-i-made-increase-the-sells">you set up your website so that half the people are directed to the old website, and half to one where you’ve made your change. You have data from both, and want to know, with confidence, “Does the change I made increase the sells?”.<br></h4>
<p><em>This is an A/B test. Often this is used interchangably with the term “split testing”, though in general A/B tests test small changes, and split testing might be when you present two entirely different websites to the user.</em> <br></p>
<h4 id="why-not-just-change-the-website-and-monitor-it-for-a-week">Why not just change the website and monitor it for a week?</h4>
<pre><code>Good question - by having two sites active at once and randomly directing users to one or the other, you control for all other variables. If one week later puts you the week before Christmas, this will impact sales, and you might draw the wrong conclusion because of these confounding effects.
</code></pre>
<h4 id="why-is-it-not-an-abc-test">Why is it not an A/B/C test?</h4>
<pre><code>you can have as many perturbations running as you want, but got to keep the name simple. The more perturbations you try though, the smaller a number of samples you’ll have for each case, and the harder it will be to draw statistically significant conclusions.
</code></pre>
<h4 id="let-us-assume-you-have-1000-users-550-were-directed-to-site-a-450-to-site-b-in-site-a-48-users-made-a-purchase-in-site-b-56-users-made-a-purchase-is-this-a-statistically-significant-result">Let us assume you have 1000 users, 550 were directed to site A, 450 to site B. In site A, 48 users made a purchase. In site B, 56 users made a purchase. Is this a statistically significant result?</h4>
<pre><code class="python">num_a= 550
num_b = 450
click_a= 48
click_b = 56
rate_a= click_a / num_a
rate_b = click_b / num_b
print(rate_a)
print(rate_b)
</code></pre>

<pre><code>0.08727272727272728
0.12444444444444444
</code></pre>
<h4 id="you-can-click-a-button-or-not-two-discrete-options-are-available-so-this-is-a-textbook-binomial-distribution-with-some-unknown-rate-for-site-a-and-site-b-we-dont-know-the-true-click-rate-but-we-can-estimate-it-using-our-small-sample">You can click a button, or not. Two discrete options are available, so this is a textbook binomial distribution, with some unknown rate for site A and site B. We don’t know the true click rate, but we can estimate it using our small sample.</h4>
<pre><code class="python">import matplotlib.pyplot as plt
import numpy as np
from scipy.stats import binom

# Determine the probability of having x number of clicks - Binomial Dist.
clicks = np.arange(10, 100)
prob_a = binom(num_a, rate_a).pmf(clicks)
prob_b = binom(num_b, rate_b).pmf(clicks)

# Make the bar plots.
plt.bar(clicks, prob_a, label=&quot;A&quot;, alpha=0.7)
plt.bar(clicks, prob_b, label=&quot;B&quot;, alpha=0.7)
plt.legend()
plt.xlabel(&quot;# of Sells&quot;); plt.ylabel(&quot;Probability&quot;);
</code></pre>

<p><img alt="png" src="output_37_0.png" /></p>
<h4 id="so-we-can-see-here-that-b-has-an-edge-but-its-certaintly-possible-if-we-pick-two-random-points-according-to-the-histograms-for-a-and-b-that-a-might-actually-be-higher-than-b">So we can see here that b has an edge, but its certaintly possible if we pick two random points according to the histograms for A and B, that A might actually be higher than B! <Br></h4>
<h4 id="as-were-interested-in-the-average-of-sells-this-averaging-of-an-underlying-distribution-means-our-final-estimate-will-be-well-approximated-by-a-normal-distribution-so-lets-reformulate-using-the-normal-approximation-here">As we’re interested in the average # of sells, this averaging of an underlying distribution means our final estimate will be well approximated by a normal distribution. So let’s reformulate, using the normal approximation here:</h4>
<pre><code class="python">from scipy.stats import norm

# Where does this come from? See this link: https://en.wikipedia.org/wiki/Binomial_distribution#Normal_approximation
std_a = np.sqrt(rate_a * (1 - rate_a) / num_a)
std_b = np.sqrt(rate_b * (1 - rate_b) / num_b)

click_rate = np.linspace(0, 0.2, 200)
prob_a = norm(rate_a, std_a).pdf(click_rate)
prob_b = norm(rate_b, std_b).pdf(click_rate)

# Make the bar plots.
plt.plot(click_rate, prob_a, label=&quot;A&quot;)
plt.plot(click_rate, prob_b, label=&quot;B&quot;)
plt.legend(frameon=False)
plt.xlabel(&quot;Purchase rate&quot;); plt.ylabel(&quot;Probability&quot;)
</code></pre>

<pre><code>Text(0, 0.5, 'Probability')
</code></pre>
<p><img alt="png" src="output_39_1.png" /></p>
<h4 id="this-is-also-a-better-plot-than-the-first-one-because-weve-removed-the-confusing-effect-of-site-a-and-site-b-having-a-slightly-different-number-of-visitors-had-so-our-question-is-still-the-same-what-is-the-chance-that-a-draw-from-b-is-higher-than-a-draw-from-a-is-it-significant">This is also a better plot than the first one, because we’ve removed the confusing effect of site A and site B having a slightly different number of visitors had. So our question is still the same: What is the chance that a draw from B is higher than a draw from A. Is it significant? <br></h4>
<h4 id="to-answer-this-let-us-utilise-the-handy-fact-that-the-sum-or-difference-of-normally-distributed-random-numbers-is-also-a-normal-this-is-simple-take-the-difference-in-the-means-and-sum-the-variance-well-do-two-things-below-first-get-the-z-score-and-second-plot-the-proper-distribution">To answer this, let us utilise the handy fact that the sum (or difference) of normally distributed random numbers is also a normal. This is simple - take the difference in the means and sum the variance. We’ll do two things below: First, get the z-score, and second, plot the proper distribution.</h4>
<pre><code class="python">z_score = (rate_b - rate_a) / np.sqrt(std_a**2 + std_b**2)
p = norm(rate_b - rate_a, np.sqrt(std_a**2 + std_b**2))

x = np.linspace(-0.05, 0.15, 1000)
y = p.pdf(x)
area_under_curve = p.sf(0)
plt.plot(x, y, label=&quot;PDF&quot;)
plt.fill_between(x, 0, y, where=x&gt;0, label=&quot;Prob(b&gt;a)&quot;, alpha=0.3)
plt.annotate(f&quot;Area={area_under_curve:0.3f}&quot;, (0.02, 5))
plt.legend()
plt.xlabel(&quot;Difference in purchase rate&quot;); plt.ylabel(&quot;Prob&quot;);

print(f&quot;zscore is {z_score:0.3f}, with p-value {norm().sf(z_score):0.3f}&quot;)
</code></pre>

<pre><code>zscore is 1.890, with p-value 0.029
</code></pre>
<p><img alt="png" src="output_41_1.png" /></p>
<h4 id="we-can-say-that-given-the-null-hypothesis-b-is-less-than-or-equal-to-a-is-true-we-would-expect-to-get-this-result-or-a-result-more-extreme-only-29-of-the-time-as-that-is-a-significant-result-typically-p-5-we-reject-the-null-hypothesis-and-state-that-we-have-evidence-that-b-a">we can say that given the null hypothesis ("B is less than or equal to A") is true , we would expect to get this result or a result more extreme only 2.9% of the time. As that is a significant result (typically p &lt; 5%), we reject the null hypothesis, and state that we have evidence that B &gt; A. <br></h4>
<h4 id="weve-made-a-lot-of-plots-for-this-to-try-and-explain-the-concept-you-can-easily-write-a-tiny-function-to-simplify-all-of-this-whether-you-want-the-confidence-or-the-p-value-just-means-changing-the-final-normcdf-to-normsf">we’ve made a lot of plots for this to try and explain the concept. You can easily write a tiny function to simplify all of this. Whether you want the confidence or the p-value just means changing the final "norm.cdf" to "norm.sf".</h4>
<pre><code class="python">def get_confidence_ab_test(click_a, num_a, click_b, num_b):
    rate_a = click_a / num_a
    rate_b = click_b / num_b
    std_a = np.sqrt(rate_a * (1 - rate_a) / num_a)
    std_b = np.sqrt(rate_b * (1 - rate_b) / num_b)
    z_score = (rate_b - rate_a) / np.sqrt(std_a**2 + std_b**2)
    return norm.sf(z_score)

print(get_confidence_ab_test(click_a, num_a, click_b, num_b))
</code></pre>

<pre><code>0.029402650172421833
</code></pre>
<h4 id="remember-non-parametric-statistical-hypothesis-tests-we-can-use-them-here-as-well">Remember Non-parametric Statistical Hypothesis Tests? We can use them here as well! <br></h4>
<h4 id="imagine-we-have-the-raw-results-of-clicks-purchases-as-0s-or-1s-as-our-distribution">Imagine we have the raw results of clicks (purchases), as 0s or 1s, as our distribution.</h4>
<pre><code class="python">from scipy.stats import mannwhitneyu

a_dist = np.zeros(num_a)
a_dist[:click_a] = 1
b_dist = np.zeros(num_b)
b_dist[:click_b] = 1

stat, p_value = mannwhitneyu(a_dist, b_dist, alternative=&quot;less&quot;)
print(f&quot;Mann-Whitney U test for null hypothesis B &lt;= A is {p_value:0.3f}&quot;)
</code></pre>

<pre><code>Mann-Whitney U test for null hypothesis B &lt;= A is 0.028
</code></pre>
<hr />
<h3 id="example-times-roman-or-times-new-roman-that-is-the-question">Example: Times Roman or Times New Roman- That is the question! <br></h3>
<p><img alt="" src="https://media-exp1.licdn.com/dms/image/C4E1BAQEr76SyZsyo2w/company-background_10000/0/1553614927942?e=2159024400&amp;v=beta&amp;t=UKNhG-wjqdLnaYir1kVvVRyHdJodkMriZe_Wltqp424" /> <br></p>
<h4 id="the-daily-planet-newspaper-is-considering-swiching-from-the-times-roman-font-to-the-times-new-roman-as-an-attempt-to-to-make-it-easier-for-their-audience-to-read-the-newspaper-and-hence-increase-the-online-purchases">The Daily Planet newspaper is considering swiching from the Times Roman Font to the Times New Roman as an attempt to to make it easier for their audience to read the newspaper and hence, increase the online purchases.</h4>
<p>*hint: The Daily Planet is a fictional broadsheet newspaper appearing in American comic books published by DC Comics, commonly in association with Superman. Read more @ https://en.wikipedia.org/wiki/Daily_Planet<br></p>
<p><img alt="" src="https://news-cdn.softpedia.com/images/fitted/620x/Times-New-Roman-The-Newpaper-Font-That-Took-Over-Windows-480938-3.jpg" /> <br></p>
<h4 id="they-have-prepared-two-versions-of-their-newspapers-one-of-each-font-on-the-first-day-they-had-a-total-of-1398-visitors-randonmly-half-of-them-699-visitors-saw-the-original-version-time-roman-and-the-other-half-saw-the-alternative-version-times-new-roman">They have prepared two versions of their newspapers, one of each font. On the first day, they had a total of 1398 visitors. Randonmly, half of them (699 visitors) saw the original version (Time Roman) and the other half saw the alternative version (Times New Roman).    <br></h4>
<h4 id="the-first-group-purchased-a-total-of-175-copies-of-the-newspaper-this-number-was-200-copies-for-the-second-group-based-on-the-observations-of-the-first-day-first-calculate-the-purchase-rate-for-each-group-and-then-decide-whether-the-daily-planet-should-change-their-font-in-order-to-increase-the-online-engagement-time">The first group purchased a total of 175 copies of the newspaper. This number was 200 copies for the second group. Based on the observations of the first day, first, calculate the purchase rate for each group and then, decide whether the Daily Planet should change their font in order to increase the online engagement time?    <br></h4>
<pre><code class="python">#Day 1
group1= 699
group2= 699
sold1= 175
sold2 = 200
rate1=  sold1/group1
rate2 = sold2/group2

print(f&quot;The ratio for the first group is {rate1:0.4f} copies sold per person&quot;)
print(f&quot;The ratio for the second group is {rate2:0.4f} copies sold per person&quot;)
from scipy.stats import mannwhitneyu
import numpy as np
a_dist = np.zeros(group1)
a_dist[:sold1] = 1
b_dist = np.zeros(group2)
b_dist[:sold2] = 1

stat, p_value = mannwhitneyu(a_dist, b_dist, alternative=&quot;less&quot;)
print(f&quot;Mann-Whitney U test for null hypothesis B &lt;= A is {p_value:0.3f}&quot;)
</code></pre>

<pre><code>The ratio for the first group is 0.2504 copies sold per person
The ratio for the second group is 0.2861 copies sold per person
Mann-Whitney U test for null hypothesis B &lt;= A is 0.066
</code></pre>
<h4 id="after-a-week-they-had-a-total-of-10086-visitors-randonmly-half-of-them-5043-visitors-saw-the-original-version-time-roman-and-the-other-half-saw-the-alternative-version-times-new-roman">After a week, they had a total of 10086 visitors. Randonmly, half of them (5043 visitors) saw the original version (Time Roman) and the other half saw the alternative version (Times New Roman).    <br></h4>
<h4 id="the-first-group-purchased-a-total-of-1072-copies-of-the-newspaper-this-number-was-1190-copies-for-the-second-group-based-on-the-observations-of-the-first-week-first-calculate-the-purchase-rate-for-each-group-and-then-decide-whether-the-daily-planet-should-change-their-font-in-order-to-increase-the-online-engagement-time">The first group purchased a total of 1072 copies of the newspaper. This number was 1190 copies for the second group. Based on the observations of the first week, first, calculate the purchase rate for each group and then, decide whether the Daily Planet should change their font in order to increase the online engagement time?    <br></h4>
<pre><code class="python">#Week 1
group1= 5043
group2= 5043
sold1= 1072
sold2 = 1190
rate1=  sold1/group1
rate2 = sold2/group2

print(f&quot;The ratio for the first group is {rate1:0.3f} copies sold per person&quot;)
print(f&quot;The ratio for the second group is {rate2:0.3f} copies sold per person&quot;)
from scipy.stats import mannwhitneyu
import numpy as np
a_dist = np.zeros(group1)
a_dist[:sold1] = 1
b_dist = np.zeros(group2)
b_dist[:sold2] = 1

stat, p_value = mannwhitneyu(a_dist, b_dist, alternative=&quot;less&quot;)
print(f&quot;Mann-Whitney U test for null hypothesis B &lt;= A is {p_value:0.3f}&quot;)
</code></pre>

<pre><code>The ratio for the first group is 0.213 copies sold per person
The ratio for the second group is 0.236 copies sold per person
Mann-Whitney U test for null hypothesis B &lt;= A is 0.002
</code></pre>
<h4 id="after-a-month-they-had-a-total-of-42000-visitors-randonmly-half-of-them-21000-visitors-saw-the-original-version-time-roman-and-the-other-half-saw-the-alternative-version-times-new-roman">After a month, they had a total of 42000 visitors. Randonmly, half of them (21000 visitors) saw the original version (Time Roman) and the other half saw the alternative version (Times New Roman).    <br></h4>
<h4 id="the-first-group-purchased-a-total-of-4300-copies-of-the-newspaper-this-number-was-5700-copies-for-the-second-group-based-on-the-observations-of-the-first-month-first-calculate-the-purchase-rate-for-each-group-and-then-decide-whether-the-daily-planet-should-change-their-font-in-order-to-increase-the-online-engagement-time">The first group purchased a total of 4300 copies of the newspaper. This number was 5700 copies for the second group. Based on the observations of the first month, first, calculate the purchase rate for each group and then, decide whether the Daily Planet should change their font in order to increase the online engagement time?    <br></h4>
<pre><code class="python">#Month 1
group1= 21000
group2= 21000
sold1= 4300
sold2 = 5700
rate1=  sold1/group1
rate2 = sold2/group2

print(f&quot;The ratio for the first group is {rate1:0.3f} copies sold per person&quot;)
print(f&quot;The ratio for the second group is {rate2:0.3f} copies sold per person&quot;)
from scipy.stats import mannwhitneyu
import numpy as np
a_dist = np.zeros(group1)
a_dist[:sold1] = 1
b_dist = np.zeros(group2)
b_dist[:sold2] = 1

stat, p_value = mannwhitneyu(a_dist, b_dist, alternative=&quot;less&quot;)
print(f&quot;Mann-Whitney U test for null hypothesis B &lt;= A is {p_value:0.15f}&quot;)
</code></pre>

<pre><code>The ratio for the first group is 0.205 copies sold per person
The ratio for the second group is 0.271 copies sold per person
Mann-Whitney U test for null hypothesis B &lt;= A is 0.000000000000000
</code></pre>
<hr />
<p><img alt="" src="https://media2.giphy.com/media/5nj4ZZWl6QwneEaBX4/source.gif" /> <br></p>
<p><strong><em>Here are some great reads on this topic:</em></strong> 
- <strong>"Hypothesis testing in Machine learning using Python"</strong> by <strong>Yogesh Agrawal</strong> available at <em>https://towardsdatascience.com/hypothesis-testing-in-machine-learning-using-python-a0dc89e169ce</em> <br>
- <strong>"Quick Guide To Perform Hypothesis Testing"</strong> available at <em>https://www.analyticsvidhya.com/blog/2020/12/quick-guide-to-perform-hypothesis-testing/</em><br>
- <strong>"A Gentle Introduction to Statistical Hypothesis Testing"</strong> by <strong>Jason Brownlee</strong> available at <em>https://machinelearningmastery.com/statistical-hypothesis-tests/</em><br>
- <strong>"17 Statistical Hypothesis Tests in Python (Cheat Sheet)"</strong> by <strong>Jason Brownlee</strong> available at <em>https://machinelearningmastery.com/statistical-hypothesis-tests-in-python-cheat-sheet/</em><br></p>
<p><strong><em>Some great reads on A/B Testing:</em></strong>
-  <strong>"Implementing A/B Tests in Python"</strong> by <strong>Robbie Geoghegan</strong> available at<em> https://medium.com/@robbiegeoghegan/implementing-a-b-tests-in-python-514e9eb5b3a1 <br>
-  <strong>"The Math Behind A/B Testing with Example Python Code"</strong> by <strong>Nguyen Ngo</strong> available at</em> https://towardsdatascience.com/the-math-behind-a-b-testing-with-example-code-part-1-of-2-7be752e1d06f <br>
-  <strong>"A/B Testing"</strong> available at<em> https://www.optimizely.com/optimization-glossary/ab-testing/ <br>
-  <strong>"A/B Testing Guide"</strong> available at</em> https://vwo.com/ab-testing/ <br></p>
<p><strong><em>Some great videos:</em></strong>
-  <strong>"What is A/B Testing? | Data Science in Minutes"</strong> by <strong>Data Science Dojo</strong> available at<em> https://www.youtube.com/watch?v=zFMgpxG-chM <br>
-  <strong>"A/B Testing Intro: Why, What, Where, &amp; How to A/B Test"</strong> by <strong>Testing Theory</strong> available at</em> https://www.youtube.com/watch?v=CH89jd4haRE <br>
-  <strong>"A/B Testing"</strong> by <strong>Udacity</strong> available at<em> https://www.youtube.com/watch?v=8H6QmMQWPEI <br>
- <strong>"Statistical Hypothesis Testing- Data Science with Python"</strong> by <strong>Technology for Noobs</strong> available at </em>https://www.youtube.com/watch?v=kd6zKBa9Rfk<em> <br>
- <strong>"Hypothesis Testing, p-value &amp; Confidence Intervals, Exploratory Data Analysis In Python Statistics"</strong> by <strong>TheEngineeringWorld</strong> available at </em>https://www.youtube.com/watch?v=kz1IXqcFVCo<em> <br>
- <strong>"Python Tutorial : Hypothesis tests"</strong> by <strong>DataCamp</strong> available at </em>https://www.youtube.com/watch?v=6wbldEMpRXc* <br></p>
<hr />
<p><img alt="" src="https://media2.giphy.com/media/dNgK7Ws7y176U/200.gif" /> <br></p>
<h2 id="exercise-wait-a-minute-isnt-the-kruskal-wallis-test-missing-something">Exercise: Wait a minute ... Isn't The Kruskal-Wallis test missing something?  <br></h2>
<h3 id="we-used-the-kruskal-wallis-to-check-whether-the-three-sets-belong-to-the-same-distribution-or-at-least-one-of-them-is-different-the-question-is-how-can-we-find-the-sets-that-are-different-what-is-the-missing-piece-in-tests-such-as-the-kruskal-wallis-test">We used the Kruskal-Wallis to check whether the three sets belong to the same distribution or at least one of them is different. The question is, how can we find the sets that are different? What is the missing piece in tests such as The Kruskal-Wallis Test?</h3>
<h4 id="make-sure-to-cite-any-resources-that-you-may-use"><em>Make sure to cite any resources that you may use.</em></h4>
<pre><code class="python">
</code></pre>

<p><img alt="" src="http://img.picturequotes.com/2/124/123499/one-finds-the-truth-by-making-a-hypothesis-and-comparing-observations-with-the-hypothesis-quote-1.jpg" /></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>
            var base_url = "../../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../../js/base.js" defer></script>
        <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" defer></script>
        <script src="../../../mathjaxhelper.js" defer></script>
        <script src="../../../search/main.js" defer></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
